digraph G {
    compound=true;

    " " [shape=point] 
    "TH Call" -> " " 
    "DGG CLI" -> " "
    " " -> "HSE Parser" [lhead=cluster0];

    subgraph cluster0 {
        label = "Core";
        "HSE Parser" -> "DGG DSL";
        "DGG DSL" -> "DGG Adapter";
    }
    
    "  " [shape=point]
    "DGG Adapter" -> "  " [ltail=cluster0];
    "  " -> Derive;
    "  " -> "HSE Pretty";

    subgraph cluster1 {
        label = "CLI Output"
        "HSE Pretty" -> stdout;
        "HSE Pretty" -> File;
    }

    subgraph cluster2 {
        label = "TH Output"
        Derive -> "TH Generation";
    }
}
